<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 
#ConfigSection
데이터베이스에 질의할 구문을 작성하는곳
 -->

<mapper namespace="accounts">
	
	<select id="userAccountVailidity" parameterType="map" resultType="map">
		select * from UserAccountValidity where user_id = #{userGwId}
	</select>
	
	<insert id="insertPasswordChangedInfo" parameterType="map">
		insert into UserAccountValidity 
		(fail_count, last_login_time, password_changed_time,user_id)
		values
		(0,getdate(),getdate(),#{userGwId})
	</insert>
	<update id="updatePasswordChangedInfo" parameterType="map">
		update a
		set a.fail_count = 0,
		a.password_changed_time = getdate()
		from UserAccountValidity a
		where
		a.user_id = #{userGwId}
	</update>
	
</mapper>



<!-- 
USERNO INT GENERATED BY DEFAULT AS IDENTITY 
          (START WITH 1, INCREMENT BY 1) NOT NULL,
    USERID VARCHAR(45) NOT NULL,
	USERNAME VARCHAR(45) NOT NULL,
	PASSWORD VARCHAR(45) NOT NULL,
 -->