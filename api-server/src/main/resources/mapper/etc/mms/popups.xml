<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 
#ConfigSection
데이터베이스에 질의할 구문을 작성하는곳
 -->

<mapper namespace="popups">
	<select id="popupList" parameterType="map" resultType="map">
	select	a.popup_id, a.dic_cd, a.title, a.main_cd, a.sub_cd, a.mdl_cd, a.grp_nm,	a.width, a.sys_yn, a.rmks, a.cid, a.cdt, a.mid, a.mdt, usage = (select count(0) from scc100 z where z.popup_id = a.popup_id)
			,c.combo_sql, c.dyna_sql
			,b.base_cd, b.sub_cd as combo_sub_cd, b.title as combo_title, b.user_yn, b.ord_sq, b.rmks as combo_rmks
	from	scl100 a
		left join bca200 b on a.sub_cd = b.main_cd
		left join scl150 c on a.popup_id = c.popup_id
	where	1=1
		and	a.title like '%' + #{popup_nm,jdbcType=NVARCHAR} + '%'	
	</select>
</mapper>


<!-- 
USERNO INT GENERATED BY DEFAULT AS IDENTITY 
          (START WITH 1, INCREMENT BY 1) NOT NULL,
    USERID VARCHAR(45) NOT NULL,
	USERNAME VARCHAR(45) NOT NULL,
	PASSWORD VARCHAR(45) NOT NULL,
 -->